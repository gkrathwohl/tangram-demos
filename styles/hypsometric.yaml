settings:
    cameras:
        - &camera_settings            { type: isometric, axis: [0, .1], vanishing_point: [0, -500] }

    lights:
        - &light_settings             { type: directional, direction: [1, 1, -.9], diffuse: 0.5, ambient: 0.85 }

    roads:
        - &highway1                   [1.00,1.00,1.00]
        - &highway_link1              [0.00, 0.00, 0.00]
        - &highway_casing1            [0.894,0.906,0.914]
        - &highway_tunnel1            [0.930,0.930,0.930]
        - &highway_tunnel_casing1     [0.894,0.906,0.914]
        - &highway_link_tunnel_casing1 [0.350,0.350,0.350]
        - &ferry1                     [0.410,0.750,0.833]
        - &rail1                      '#999'
        - &rail1_e                    '#bbb'
        - &rail2                      '#777'             # less important rail (service, sidings)
        - &major_road1                [1.0, 1.0, 1.0]
        - &major_road1b               [0.935, 0.935, 0.935]
        - &major_road1c               white    #15%
        - &major_road2                [0.935, 0.935, 0.935]
        - &major_road2a               [0.935, 0.935, 0.935]
        - &major_road2b               [0.935, 0.935, 0.935]
        - &major_road3                [0.935, 0.935, 0.935]
        - &major_road4                [0.00, 0.00, 0.00]
        - &major_road5                white
        - &major_casing1              [0.40, 0.40, 0.40]        # same as highway_casing1
        - &major_casing2              [0.40, 0.40, 0.40]        # zoomed out
        - &major_tunnel1              [0.930,0.930,0.930]
        - &major_tunnel_casing1       [1.00, 1.00, 1.00]
        - &major_route1               [0.0, 0.0, 0.0]
        - &major_route2               [0.2, 0.2, 0.2]           # zoomed out
        - &minor_route                [0.97, 0.97, 0.97]        # same as major_route
        - &minor_road1                [0.935, 0.935, 0.935]     # natural earth
        - &minor_road2                [1.00,1.00,1.00]     # natural earth, same as major_road2
        - &minor_road3                [0.935, 0.935, 0.935]
        - &minor_road4                [0.935, 0.935, 0.935]     # zoomed out
        - &minor_road5                [0.935, 0.935, 0.935]     # zoomed out, again
        - &minor_casing1              white                     # same as highway_casing1
        - &minor_casing2              white                     # zoomed out
        - &minor_tunnel1              [0.930,0.930,0.930]
        - &minor_tunnel_casing1       [1.00, 1.00, 1.00]
        - &service_road1              [0.935, 0.935, 0.935]
        - &service_road2              white
        - &service_road_casing1       [0.40, 0.40, 0.40]
        - &service_road_casing2       white
        - &path1                      [0.97, 0.97, 0.97]
        - &path2                      [0.97, 0.97, 0.97]        # zoomed out
        - &path_casing1               [0.40, 0.40, 0.40]
        - &path_bridge_casing1        [0.40, 0.40, 0.40]
        - &path_bridge_casing2        [0.40, 0.40, 0.40]        # zoomed out
        - &path_steps1                red
        - &path_steps1_b              '#ccc'
        - &piste_easy                 [0.367,0.750,0.622]
        - &piste_intermediate         [0.420,0.678,0.863]
        - &piste_advanced             [0.450,0.450,0.450]
        - &piste_expert               [0.450,0.450,0.450]

    boundaries:
        - &country_boundary           [1.00,1.00,1.00]
        - &region_boundary            [1.00,1.00,1.00]
        - &subregion_boundary         [1.00,1.00,1.00]
        - &city_wall                  [0.682,0.682,0.682]
        - &retaining_wall             [0.827,0.808,0.780]
        - &snow_fence                 [0.827,0.808,0.780]
        - &fence                      [0.827,0.808,0.780]
        - &dam                        [0.827,0.808,0.780]

    areas:
        - &scene1      white                    # map background
        - &water1      [0.870, 0.870, 0.870]    # water wave
        - &water2      [0.760, 0.760, 0.760]    # water wave
        - &water3      [0.5, 0.5, 0.5]          # playa texture
        - &water1_o    '#fff'                   # water stroke (ocean coastline)
        - &water2_o    '#d1d1d1'                # water stroke 2 (streams, lake outlines)
        - &earth1      white                    # land color
        - &earth2      '#e9e4e0'                # urban
        - &earth2_v    false                    # urban
        - &green1      [0.50,0.50,0.50]         # park
        - &green1_r    '#bbbbbb'                # park roads
        - &green1_b    [.65, .65, .65]          # park buildings
        - &green1_bo   [.8, .8, .8]             # park building outlines
        - &green2      [0.90,0.90,0.90]         # cemetery
        - &green3      '#9a9a9a'                # golf course
        - &green4      [0.90,0.90,0.90]         # farm faint
        - &green4_v    false                    # farm faint
        - &green5      [0.75,0.75,0.75]         # farm
        - &green6      [0.40,0.40,0.40]         # nature reserve
        - &green7      [0.85,0.85,0.85]         # forest
        - &green8      [0.80,0.80,0.80]         # conservation
        - &green9      [0.85,0.85,0.85]         # forest (landcover)
        - &green9_e    [0.90,0.90,0.90]         # forest (landcover) early
        - &green9_v    true                     # forest (landcover) visibility
        - &green10     [0.85,0.85,0.85]         # sports_centre
        - &green11     [0.85,0.85,0.85]         # minor zoo related AOIs
        - &green11_o   [0.85,0.85,0.85]         # minor zoo related AOIs outline
        - &orange1     '#aaaaaa'                # stadium
        - &orange2     [0.40,0.40,0.40]         # pitch (play field)
        - &brown1      '#7b7b7b'                # university
        - &brown1_r    '#bbbbbb'                # university roads
        - &brown1_b    [.65, .65, .65]          # university buildings
        - &brown1_bo   [.8, .8, .8]             # university building outlines
        - &brown2      '#aaaaaa'                # school
        - &brown3      [0.40,0.40,0.40]         # playground
        - &red1        '#a2a2a2'                # hospital
        - &red1_r      '#bbbbbb'                # hospital roads
        - &red1_b      [.65, .65, .65]          # hospital buildings
        - &red1_bo     [.8, .8, .8]             # hospital building outlines
        - &gray-all    [0.935,0.960,0.970]      # default gray for landuse outdoor style
        - &grey1       '#cccccc'                # pedestrian, retail, airport apron, parking, church
        - &grey1_e     '#dad6d4'                # pedestrian, retail, airport apron, parking, church early zoom 14
        - &grey1_v     true                     # pedestrian, retail, airport apron, parking, church
        - &grey2       [0.5, 0.5, 0.5]          # airport runway
        - &grey3       '#bbbbbb'                # railway
        - &grey4       '#ffc52a'                # airport taxiway
        - &grey5       '#ffc52a'                # airport taxiway
        - &grey6       '#dddddd'                # industrial
        - &grey6_b     [.65, .65, .65]          # industrial buildings
        - &grey6_bo    [.8, .8, .8]             # industrial building outlines
        - &grey7       '#ecebe9'                # pedestrian, match minor road / path color
        - &grey7_v     true                     # pedestrian visibility
        - &grey8       '#ecebe9'                # winter sports
        - &grey8_v     true                     # winter sports visibility
        - &grey9       [.7, .0, .0, 0.5]        #[.7, .7, .7]        # transit platform
        - &grey9_o     [.5, .5, .5]             # transit platform outline
        - &grey9_v     true                     # transit platform visibility
        - &grey10      '#d4cce6'                # generic major landuse (theme park, resort, aquarium, winery)
        - &grey10_o    '#bcb9c5'                # generic major landuse outline
        - &grey11      '#d7d7d7'                # generic minor landuse (attraction, artwork)
        - &grey11_o    '#cccccc'                # generic minor landuse outline
        - &grey12      '#cfcfcf'                # generic minor amusements (roller coasters, rides, slide, carousel)
        - &grey12_o    '#c5c5c5'                # generic minor amusements
        - &purple      '#f0e1e1'                # airport
        - &purple_v    false                    # airport
        - &mystry1     '#aaaaaa'                # recreation ground (type of park, sometimes around reservoirs)
        - &building1   white                    # building
        - &building2   white                    # building stroke
        - &building_o  25                       # building stroke order
        - &building_e  true                     # building stroke order

    labels:
        - &text_fill   '#000'                       # WHITE
        - &text_fill2  '#000'                       # WHITE
        - &text_fill_road_e   '#555'                # WHITE
        - &text_fill_exits    [0.40,0.40,0.40]      # motorway junctions, highway_casing1
        - &text_fill_building '#000'                # tan
        - &text_fill_address  [0.60,0.60,0.60]      # HUH
        - &text_fill_water   [0.354,0.531,0.620]    # blue
        - &text_fill_park    [0.175,0.175,0.175]    # green
        - &text_fill_beach   [0.35,0.35,0.35]      # black
        - &text_fill_piste   [0.350,0.350,0.350]    # dark gray
        - &text_fill_piste_e [0.350,0.350,0.350]    # dark gray early
        - &text_stroke       [0.913,0.925,0.933]    # land color
        - &text_stroke_park  [0.913,0.925,0.933]     # land color
        - &text_stroke_water [0.913,0.925,0.933]
        - &text_stroke_address   [0.913,0.925,0.933]      # address stroke color
        - &townspot_sprite   townspot-m-rev         # depends on land color and text settings
        - &text_font_family  'Open Sans'            # branding in asperational Unicode, yo (or Helvetica)

labels-global:
    - &text_visible_continent         true
    - &text_visible_island            true
    - &text_visible_admin             true
    - &text_visible_populated_places  true
    - &icon_visible_populated_places  true
    - &text_visible_neighbourhoods    true
    - &text_visible_neighbourhoods_e  true
    - &text_visible_building          true
    - &text_visible_address           true
    - &text_visible_water_labels      true
    - &label_visible_landuse_green    true
    - &icon_visible_landuse_green     true
    - &text_visible_landuse_green     true
    - &label_visible_poi_landuse      true
    - &icon_visible_poi_landuse       true
    - &text_visible_poi_landuse       true
    - &label_visible_poi_landuse_e    true
    - &icon_visible_poi_landuse_e     true
    - &text_visible_poi_landuse_e     true
    - &label_visible_station          true
    - &icon_visible_station           true
    - &text_visible_station           true
    - &text_visible_highway           true
    - &text_visible_highway_e         true
    - &text_visible_trunk_primary     true
    - &text_visible_trunk_primary_e2  true
    - &text_visible_trunk_primary_e   true
    - &text_visible_secondary         true
    - &text_visible_secondary_e       true
    - &text_visible_tertiary          true
    - &text_visible_tertiary_e        true
    - &text_visible_minor_road        true
    - &text_visible_minor_road_e      true
    - &text_visible_service_road      true
    - &text_visible_path              true
    - &text_visible_piste             true
    - &text_visible_steps             true
    - &text_visible_aerialway         true
    - &text_visible_shields           false
    - &text_visible_exits             true
    - &text_visible_exits_e           true


sources:
    osm: 
        type: TopoJSON
        url: https://vector.mapzen.com/osm/all/{z}/{x}/{y}.topojson
        max_zoom: 16
    elevation:
        type: Raster
        url: https://terrain-preview.mapzen.com/terrarium/{z}/{x}/{y}.png
        max_zoom: 15
    normals:
        type: Raster
        url: https://terrain-preview.mapzen.com/normal/{z}/{x}/{y}.png
        max_zoom: 15
        

        
lights:
    directional1:
        type: directional
        direction: [1, -.6, -.5]
        diffuse: [1.000, 0.931, 0.776]
    directional2:
        type: directional
        direction: [-1, -.4, -.5]
        diffuse: [0.824, 0.970, 0.924]

styles: 
    hillshade1:
        base: raster
        raster: normal
        blend: multiply
    hillshade:
        base: raster
        shaders:
            blocks:
                global: |
                    float unpack(vec4 h) {
                        return (h.r * 1. + h.g / 256. + h.b / 65536.);
                    }
                color: |
                    float height = unpack(color);
                    color = vec4(1.0);
                    
                    // Color ramps
                    vec3 colors[5];
                    colors[0] = vec3(0.);
                    colors[1] = vec3(0.92, 0.91, 0.69);
                    colors[2] = vec3(0.53, 0.73, 0.44);

                    
                    float step1 = 0.50; // bottom
                    float step2 = 0.503;
                    float step3 = 0.505;

                    
                    color.rgb = mix(colors[0], colors[1], smoothstep(step1, step2, height));
                    color.rgb = mix(color.rgb, colors[2], smoothstep(step2, step3, height));



layers: 
    terrain:
        data: { source: elevation, layer: _default }
        draw:
            hillshade:
                order: 0
    hills:
        data: { source: normals, layer: _default }
        draw:
            hillshade1:
                order: 1

    roads:
            data: { source: osm, layer: roads }
            filter: { not: { kind: rail } }
            draw:
                lines:
                    interactive: true
                    #color: black
                    width: 1px
                    order: function() { return feature.sort_key; }
                    # but give them all the same outline
                    outline:
                        order: 352
                text-blend-order:
                    visible: false    # labels are enabled by each layer below
                    font:
                        family: *text_font_family
                        weight: 500
                        fill: *text_fill

            early:
                filter: { $zoom: { max: 15 } }
                draw:
                    lines:
                        outline:
                            order: function() { return feature.sort_key; }
            bridges-tunnels:
                filter: { any: [is_bridge: yes, is_tunnel: yes] }
                draw:
                    lines:
                        #cap: butt
                        outline:
                            # except bridges and tunnels, their outlines should also self-sort
                            order: function() { return feature.sort_key; }

            # default outlines starting at zoom 16
            default-outline-width:
                filter: { $zoom: { min: 16 } }
                draw:
                    lines:
                        outline:
                            width: function () { return 3/16 * Math.log($zoom); }

            natural_earth_highways:
                filter: { source: 'naturalearthdata.com' }
                draw:
                    lines:
                        color: [[5, [0.5,0.5,0.5]],[6, [0.350,0.350,0.350]]]
                        width: [[5, 0.5px], [6, 0.5px], [7, 0.75px], [9, 1.5px], [14, 1.5px], [16, 4px], [17, 10m]]
                        outline:
                            color: *highway_casing1
                            width: [[9, 0px], [10, 0px], [12, 1px], [16, 2px]]
                major_road:
                    filter: { type: ['Secondary Highway','Road'] }
                    draw:
                        lines:
                            color: [[5, [0.75,0.75,0.75]], [8, [0.4,0.4,0.4]], [13, [0.4,0.4,0.4]], [17, *major_road1]]
                            #color: red
                            width: [[5, 0.25px], [7, 0.5px], [7, 0.75px], [9, 1px], [10, 9px], [11, 9px], [13, 1px], [16, 2.5px], [19, 6m]]
                            outline:
                                width: [[8, 0.0px], [9, 0.0px], [11, .5px], [16, .75px]]
                minor_road:
                    filter: { type: 'Unknown' }
                    draw:
                        lines:
                            color: [[12, *minor_road1], [17, *minor_road2]]
                            width: [[12, 1.0px], [14, 1.5px], [15, 3px], [16, 5m]]
                            # outline:
                            #     width: [[12, 0px], [14, .5px], [17, 1px]]
                ferry:
                    filter: { kind: Ferry }
                    draw:
                        lines:
                            color: *ferry1
                            width: [[12, 0.5px], [13, 0.75px], [15, 1.0px]]
                            outline:
                                width: 0px
            highway:
                filter: { kind: highway }
                draw:
                    lines:
                        color: [[8, [0.408,0.430,0.461]], [14, [0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                        width: [[8, 1px], [12, 1.25px], [13, 1.5px], [14, 0px], [15, 1px], [16, 5px], [17, 10px], [18, 10m]]
                        outline:
                            color: [[8, [0.894,0.906,0.914]], [13, [0.408,0.430,0.461]], [14, [0.408,0.430,0.461]], [16, [0.408,0.430,0.461]]]
                            width: [[8,0px], [13,0px], [14,1px], [15,2px], [16, 3px], [17, 4px], [18, 5px]]
                    #dashedTunnel:
                    #    width: [[8, 1px], [12, 1.25px], [13, 1.5px], [14, 0px], [15, 1px], [16, 5px], [17, 10px], [18, 10m]]
                link:
                    filter: { is_link: yes } # on- and off-ramps, etc
                    draw:
                        lines:
                            #color: *highway_link1
                            color: [[9, [0.50,0.50,0.50]], [13, [0.408,0.430,0.461]], [14, [1.0,1.0,1.0]], [15, [1.0,1.0,1.0]]]
                            width: [[9, 0px], [11, 0.15px], [12, 0.5px], [13, 0.75px], [14, 0px], [15, 1px], [16, 2.5px], [17, 4px], [18, 8px], [19, 8px]]
                            outline:
                                color: [[9,[0.894,0.906,0.914]], [13, [0.408,0.430,0.461]], [14, [0.408,0.430,0.461]], [15, [0.408,0.430,0.461]]]
                                width: [[9, 0px], [13, 0px], [14, 0.5px], [15, 1px], [16, 2px], [17, 2px], [18, 2px]]
                    early_link:
                        filter: { $zoom: {min: 13, max: 15} }
                        draw:
                            lines:
                                order: 352
                    tunnel-link:
                        filter: {is_tunnel: yes, $zoom: {min: 13} }
                        draw:
                            lines:
                                color: [[13,[0.790,0.790,0.790]], [14,[0.820,0.820,0.820]], [15,[0.950,0.950,0.950]], [16,[0.950,0.950,0.950]]]
                                outline:
                                    color: [0.900,0.900,0.900]
                tunnel:
                    filter: {is_tunnel: yes, $zoom: {min: 13} }
                    draw:
                        #dashedTunnel:
                        #    color: blue
                        #    order: function() { return (feature.sort_key - 1); }
                        lines:
                            #visible: false
                            color: [[13,[0.710,0.710,0.710]], [14,[0.779,0.802,0.828]], [15,[0.950,0.950,0.950]], [16,[0.950,0.950,0.950]]]
                            outline:
                                color: [[13, [0.720,0.720,0.720]], [14, [0.770,0.770,0.770]], [15, [0.80,0.80,0.80]], [16, [0.825,0.825,0.825]]]
                highway_bridge:
                    filter: {is_bridge: yes}
                    draw:
                        lines:
                            cap: round
                            outline:
                                cap: butt
                labels-highway-early:
                    filter: { $zoom: [7,8,9] }
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_shields
                            text_source: ref
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 400
                                size: 9px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z10:
                    filter:
                        $zoom: 10
                    draw:
                        text-blend-order:
                            visible: *text_visible_shields
                            text_source: ref
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 400
                                size: 9px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z11:
                    filter:
                        $zoom: 11
                    draw:
                        text-blend-order:
                            visible: *text_visible_shields
                            text_source: ref
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 10px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z12:
                    filter:
                        $zoom: 12
                    draw:
                        text-blend-order:
                            visible: *text_visible_shields
                            text_source: ref
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 10px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z13:
                    filter:
                        $zoom: 13
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            #text_source: ref
                            text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 11px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z14:
                    filter:
                        $zoom: 14
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            #text_source: ref
                            text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 11px
                                stroke: { color: [0.898,0.906,0.910], width: 4 }
                labels-highway-z15:
                    filter:
                        $zoom: 15
                    draw:
                        text-blend-order:
                            visible: *text_visible_highway
                            font:
                                fill: [1.0,1.0,1.0]
                                weight: 600
                                size: 12px
                                stroke: { color: [0.408,0.427,0.459], width: 4 }
                labels-highway-z16:
                    filter: { $zoom: { min: 16, max: 18 } }
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            font:
                                fill: [1.0,1.0,1.0]
                                weight: 600
                                size: 13px
                                stroke: { color: [0.408,0.427,0.459], width: 4 }
                labels-highway-z17:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 15px
                                stroke: { color: [1.000,1.000,1.000], width: 4 }
                labels-highway-z18:
                    filter: { $zoom: { min: 18 } }
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 16px
                                stroke: { color: [1.000,1.000,1.000], width: 4 }
                labels-highway-z19:
                    filter: { $zoom: { min: 19 } }
                    draw:
                        text-blend-order:
                            priority: 50
                            visible: *text_visible_highway
                            font:
                                fill: [0.408,0.427,0.459]
                                weight: 600
                                size: 16px
                                stroke: { color: [1.000,1.000,1.000], width: 4 }

            major_road:
                filter: { kind: major_road }
                # default style
                draw:
                    lines:
                        color: [[8, *major_road4], [13, major_road2], [17, [1.0,1.0,1.0]]]
                        width: [[13, 1px], [14, 1px], [16, 2.5px], [17,3px]]
                        outline:
                            width: [[12, 0px], [13, .5px], [15, 1px], [17, 2px]]
                trunk_primary:
                    filter: { highway: [trunk, primary] }
                    draw:
                        lines:
                            color: [[8, [0.529,0.556,0.592]], [11, [0.529,0.556,0.592]], [14, [0.529,0.556,0.592]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            width: [[8, 0px], [11, 0.65px], [12, 0.75px], [13, 1px], [14, 1.5px], [15, 0px], [16, 3px], [17, 6px], [18, 9m]]
                            outline:
                                color: [[8,[0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                width: [[8,0px], [11,0px], [14,0px], [15, 1px], [16, 1.5px], [17, 2px], [18, 4px]]
                    early:
                        filter: { $zoom: { max: 16 } }
                        draw:
                            lines:
                                order: 352
                                outline:
                                    order: function() { return feature.sort_key + 2; }
                        primary:
                            filter: { kind: [primary] }
                            draw:
                                lines:
                                    outline:
                                        order: function() { return feature.sort_key + 1; }
                    routes:
                        filter: { ref: true }
                        draw:
                            #dashedTunnel:
                            #    width: [[9, 0.5px], [10, 0.5px], [11, 0.75px], [12, 1.25px], [13, 1.25px], [14, 0px], [15, 1px], [16, 4px], [17, 8px], [18, 9m]]
                            #    outline:
                            #        color: green
                            #        width: [[8,0px], [13,0px], [14,0.75px], [15,2px], [16, 3px], [17, 4px], [18, 4px]]
                            lines:
                                color: [[10, [0.508,0.530,0.561]], [11, [0.408,0.430,0.461]], [13, [0.408,0.430,0.461]], [14,[1.0,1.0,1.0]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                width: [[9, 0.6px], [10, 0.75px], [11, 1.0px], [12, 1.1px], [13, 0.8px], [14, 0.5px], [15, 1px], [16, 4px], [17, 8px], [18, 9m]]
                                outline:
                                    color: [[8,[0.894,0.906,0.914]], [13, [0.529,0.556,0.592]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                    width: [[8,0px], [13,0px], [14,0.75px], [15,2px], [16, 3px], [17, 4px], [18, 4px]]
                        early:
                            filter: { $zoom: { max: 16 } }
                            draw:
                                lines:
                                    order: function() { return feature.sort_key + 2; }
                                    outline:
                                        order: 353
                        primary-route-in-green:
                            filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden,wood,national_park,protected_area,battlefield] }
                            draw:
                                lines:
                                    color: [[8, [0.408,0.430,0.461]], [11, [0.408,0.430,0.461]], [14,[0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                    width: [[9, 0.6px], [10, 0.75px], [11, 1.0px], [12, 1.1px], [13, 1.2px], [14, 0.5px], [15, 1px], [16, 4px], [17, 8px], [18, 9m]]
                                    outline:
                                        color: [[8,[0.894,0.906,0.914]], [13, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                        # national-routes:
                        #     filter: { network: [US:US, US:I] }
                        #     draw:
                        #         lines:
                        #             color: *major_route1
                        #             #color: [[8,*major_route2],[9,major_route2],[10,*major_route1]]
                        #             width: [[8, 1px], [10, 1.15px], [11, 1px], [12, 1px], [14, 1.75px], [15, 3px], [16, 4px], [17, 4px]]
                        #             outline:
                        #                 color: [1.0,1.0,1.0]
                        #                 width: 2px
                        tunnel:
                            filter: {is_tunnel: yes, $zoom: {min: 13} }
                            draw:
                                #dashedTunnel:
                                #    color: blue
                                #    order: function() { return (feature.sort_key - 1); }
                                lines:
                                    #visible: false
                                    color: [[13,[0.710,0.710,0.710]], [14,[0.779,0.802,0.828]], [15,[0.950,0.950,0.950]]] #[15,[0.744,0.764,0.792]]
                                    outline:
                                        color: [[13, [0.720,0.720,0.720]], [14, [0.770,0.770,0.770]], [15, [0.80,0.80,0.80]], [16, [0.825,0.825,0.825]]] #[15, [0.894,0.906,0.914]]
                        labels-trunk_primary-route-z14:
                            filter: { $zoom: [14] }
                            draw:
                                text-blend-order:
                                    priority: 53
                                    visible: *text_visible_trunk_primary_e2
                                    text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                    font:
                                        fill: [0.495,0.511,0.532]
                                        size: 11px
                                        stroke: { color: *text_stroke, width: 3 }
                        labels-trunk_primary-route-z15:
                            filter: { $zoom: [15] }
                            draw:
                                text-blend-order:
                                    priority: 53
                                    visible: *text_visible_trunk_primary
                                    text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                    font:
                                        fill: [0.495,0.511,0.532]
                                        weight: 600
                                        size: 12px
                                        stroke: { color: [0.969,0.973,0.973], width: 3 }
                        labels-trunk_primary-route-z16:
                            filter: { $zoom: { min: 16 } }
                            draw:
                                text-blend-order:
                                    priority: 53
                                    visible: *text_visible_trunk_primary
                                    text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                    font:
                                        fill: [0.495,0.511,0.532]
                                        weight: 600
                                        size: 13px
                                        stroke: { color: [0.969,0.973,0.973], width: 4 }
                        labels-trunk_primary-route-z17-z18:
                            filter: { $zoom: [17,18] }
                            draw:
                                text-blend-order:
                                    priority: 53
                                    visible: *text_visible_trunk_primary
                                    text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                    font:
                                        fill: [0.495,0.511,0.532]
                                        weight: 600
                                        size: 13px
                                        stroke: { color: [0.969,0.973,0.973], width: 6 }
                        labels-trunk_primary-route-z19:
                            filter: { $zoom: { min: 19 } }
                            draw:
                                text-blend-order:
                                    priority: 53
                                    visible: *text_visible_trunk_primary
                                    text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                    font:
                                        fill: [0.495,0.511,0.532]
                                        weight: 600
                                        size: 16px
                                        stroke: { color: [0.969,0.973,0.973], width: 6 }
                    primary-in-green:
                        filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden,wood,national_park,protected_area,battlefield] }
                        draw:
                            lines:
                                color: [[8, [0.408,0.430,0.461]], [11, [0.408,0.430,0.461]], [14,[0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                width: [[9, 0.6px], [10, 0.75px], [11, 1.0px], [12, 1.1px], [13, 1.0px], [14, 0.5px], [15, 1.2px], [16, 4px], [17, 8px], [18, 9m]]
                                outline:
                                    color: [[8,[0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                    width: [[8,0px], [13,0px], [14,0.75px], [15,1.5px], [16, 3px], [17, 4px], [18, 4px]]
                        tunnel:
                            filter: {is_tunnel: yes, $zoom: {min: 13} }
                            draw:
                                lines:
                                    color: [[13,[0.670,0.670,0.670]], [14,[0.720,0.720,0.720]], [15,[0.920,0.920,0.920]], [16,[0.920,0.920,0.920]]]
                                    outline:
                                        color: [[13,[0.894,0.906,0.914]],[14,[0.894,0.906,0.914]],[15,[0.744,0.764,0.792]]]
                                        width: [[13, 0px], [14, 0px], [15, 1px], [16, 1.5px], [17, 2px], [18, 4px]]
                        # golf_course:
                        #     filter: { landuse_kind: golf_course }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[10, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                        # zoo:
                        #     filter: { landuse_kind: zoo }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[10, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                    labels-trunk_primary-z11:
                        filter:
                            $zoom: [11]
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    size: 9px
                                    stroke: { color: *text_stroke, width: 2 }
                    labels-trunk_primary-z12:
                        filter:
                            $zoom: [12]
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    size: 10px
                                    stroke: { color: *text_stroke, width: 3 }
                    labels-trunk_primary-z13:
                        filter:
                            $zoom: [13]
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    size: 11px
                                    stroke: { color: *text_stroke, width: 3 }
                    labels-trunk_primary-z14:
                        filter:
                            $zoom: [14]
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    size: 11px
                                    stroke: { color: *text_stroke, width: 4 }
                    labels-trunk_primary-z15:
                        filter: { $zoom: [15] }
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    size: 12px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-trunk_primary-z16:
                        filter: { $zoom: [16] }
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    weight: 600
                                    size: 13px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-trunk_primary-z17:
                        filter: { $zoom: [17] }
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    weight: 600
                                    size: 13px
                                    stroke: { color: [0.969,0.973,0.973], width: 6 }
                    labels-trunk_primary-z18:
                        filter: { $zoom: { min: 18 } }
                        draw:
                            text-blend-order:
                                priority: 53
                                visible: *text_visible_trunk_primary
                                text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                font:
                                    fill: [0.495,0.511,0.532]
                                    weight: 600
                                    size: [[18,13px],[19,16px]]
                                    stroke: { color: [0.969,0.973,0.973], width: 6 }
                link:
                    filter: { is_link: yes } # on- and off-ramps, etc
                    draw:
                        lines:
                            color: [[8, [0.529,0.556,0.592]], [11, [0.529,0.556,0.592]], [14, [0.529,0.556,0.592]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            width: [[10, 0.5px], [13, 0.5px], [14, 1px], [15, 0px], [16, 1.75px], [17, 2px], [18, 3px], [19, 8px]]
                            outline:
                                color: [[8,[0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                width: [[10, 0px], [14, 0px], [15, 0.5px], [16, 1px], [17, 1px], [18, 1px]]
                tunnel:
                    filter: {is_tunnel: yes, $zoom: {min: 13} }
                    draw:
                        lines:
                            color: [[13,[0.779,0.802,0.828]], [14,[0.779,0.802,0.828]], [15,[0.744,0.764,0.792]], [16,[0.950,0.950,0.950]]]
                            outline:
                                color: [[13, [0.894,0.906,0.914]], [15, [0.894,0.906,0.914]], [16, [0.85,0.85,0.85]]]
                                width: [[8,0px], [11,0px], [14,0px], [16,1.5px], [17, 3px], [18, 3px]]
                secondary:
                    filter: { highway: secondary }
                    draw:
                        lines:
                            color: [[10, [0.714,0.733,0.760]], [11, [0.714,0.733,0.760]], [12, [0.533,0.555,0.586]], [13, [0.529,0.556,0.592]], [14, [0.529,0.556,0.592]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            width: [[10, 0.5px], [12, 0.5px], [13, 0.65px], [14, 1px], [15, 0px], [16, 3px], [17, 6px], [18, 9m]]
                            outline:
                                color: [[10, [0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                width: [[10,0px], [14,0px], [15,1px], [16, 1.5px], [17, 2px], [18, 4px]]
                    early:
                        filter: { $zoom: { max: 16 } }
                        draw:
                            lines:
                                order: 352
                                outline:
                                    order: 353 #function() { return feature.sort_key + 2; }
                    routes:
                        filter: { ref: true, $zoom: { min: 10} }
                        draw:
                            lines:
                                color: [[11, [0.508,0.530,0.561]], [13, [0.408,0.430,0.461]], [14, [0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                width: [[11, 0.4px], [12, 0.75px], [13, 0.75px], [14, 1px], [15, 0px], [16, 1.5px], [17, 6px], [18, 9m]]
                                outline:
                                    color: [[10, [0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                    width: [[10,0.4px], [14,0.5px], [15,0.65px], [16,1.5px], [17, 2px], [18, 4px]]
                        early:
                            filter: { $zoom: { max: 15 } }
                            draw:
                                lines:
                                    order: function() { return feature.sort_key + 2; }
                                    outline:
                                        order: 353
                        secondary-route-in-green:
                            filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden,wood,national_park,protected_area,battlefield] }
                            draw:
                                lines:
                                    color: [[11, [0.408,0.430,0.461]], [13, [0.408,0.430,0.461]], [14, [0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                    width: [[11, 0.6px], [12, 0.75px], [13, 0.75px], [14, 1px], [15, 0px], [16, 1.5px], [17, 6px], [18, 9m]]
                                    outline:
                                        width: [[10,0.5px], [14,0.5px], [15,0.65px], [16,1.5px], [17, 2px], [18, 4px]]
                        tunnel:
                            filter: {is_tunnel: yes, $zoom: {min: 13} }
                            draw:
                                lines:
                                    color: [[13,[0.779,0.802,0.828]], [14,[0.779,0.802,0.828]], [15,[0.8,0.8,0.8]], [16,[0.85,0.85,0.85]], [17,[0.950,0.950,0.950]]]
                                    outline:
                                        color: [[13, [0.350,0.350,0.350]], [16, [0.350,0.350,0.350]], [17, [0.85,0.85,0.85]]]
                                        width: [[10,0px], [17, 2px], [18, 2px]]
                        labels-secondary-routes:
                            filter: { $zoom: [13] }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        size: 11px
                                        stroke: { color: *text_stroke, width: 4 }
                        labels-secondary-routes-z14:
                            filter: { $zoom: [14] }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        size: 11px
                                        stroke: { color: *text_stroke, width: 4 }
                        labels-secondary-routes-z15:
                            filter: { $zoom: { min: 15 } }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        weight: 600
                                        size: 11px
                                        stroke: { color: *text_stroke, width: 4 }
                        labels-secondary-routes-z16:
                            filter: { $zoom: { min: 16 } }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        weight: 600
                                        size: 12px
                                        stroke: { color: [0.969,0.973,0.973], width: 4 }
                    secondary-in-green:
                        filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden,wood,national_park,protected_area,battlefield] }
                        draw:
                            lines:
                                color: [[10, [0.714,0.733,0.760]], [11, [0.714,0.733,0.760]], [12, [0.533,0.555,0.586]], [13, [0.529,0.556,0.592]], [14, [0.529,0.556,0.592]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                outline:
                                    color: [[10, [0.894,0.906,0.914]], [14, [0.529,0.556,0.592]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                        labels-secondary-in-green-z13:
                            filter: { $zoom: { min: 13 } }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        stroke: { color: [0.843,0.961,0.914], width: 4 }
                        labels-secondary-in-green-z17:
                            filter: { $zoom: { min: 17 } }
                            draw:
                                text-blend-order:
                                    priority: 54
                                    visible: *text_visible_secondary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        stroke: { color: [1.00,1.00,1.00], width: 4 }
                        # golf_course:
                        #     filter: { landuse_kind: golf_course }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[10, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                        # zoo:
                        #     filter: { landuse_kind: zoo }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[10, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                    labels-secondary-z13:
                        filter:
                            $zoom: [13]
                        draw:
                            text-blend-order:
                                priority: 54
                                visible: *text_visible_secondary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 9px
                                    stroke: { color: *text_stroke, width: 4 }
                    labels-secondary-z14:
                        filter:
                            $zoom: [14]
                        draw:
                            text-blend-order:
                                priority: 54
                                visible: *text_visible_secondary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 9px
                                    stroke: { color: *text_stroke, width: 4 }
                    labels-secondary-z15:
                        filter:
                            $zoom: [15]
                        draw:
                            text-blend-order:
                                priority: 54
                                visible: *text_visible_secondary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 10px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-secondary-z16:
                        filter: { $zoom: { min: 16, max: 18 } }
                        draw:
                            text-blend-order:
                                priority: 54
                                visible: *text_visible_secondary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 12px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-secondary-z17:
                        filter: { $zoom: { min: 17 } }
                        draw:
                            text-blend-order:
                                priority: 54
                                visible: *text_visible_secondary
                                #text_source: ref
                                text_source: function() { if( feature.ref && feature.name ) { return feature.ref + " " + feature.name; } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 13px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                tertiary:
                    filter: { highway: [tertiary, tertiary_link] }
                    draw:
                        lines:
                            color: [[11, [0.714,0.733,0.760]], [12, [0.633,0.655,0.686]], [13, [0.529,0.556,0.592]], [14,[0.529,0.556,0.592]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            width: [[11, 0.5px], [12, 0.65px], [13, 0.65px], [14, 1px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                            outline:
                                color: [0.529,0.556,0.592]
                                width: [[11, 0px], [14, 0px], [15, 0.75px], [16, 1.5px], [17, 2px], [18, 3px]]
                    early:
                        filter: { $zoom: { max: 15 } }
                        draw:
                            lines:
                                order: 352
                                outline:
                                    order: function() { return feature.sort_key + 3; }
                    routes:
                        filter: { ref: true, $zoom: { min: 12} }
                        draw:
                            lines:
                                color: [[11, [0.408,0.430,0.461]], [13, [0.408,0.430,0.461]], [14,[0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                width: [[11, 0.3px], [12, 0.4px], [13, .6px], [14, 1px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                                outline:
                                    color: [[11, [0.894,0.906,0.914]], [14,[0.779,0.802,0.828]], [15, [0.529,0.556,0.592]]]
                                    width: [[11, 0px], [14, 0px], [15, 0.75px], [16, 1.5px], [17, 2px], [18, 3px]]
                        early:
                            filter: { $zoom: { max: 15 } }
                            draw:
                                lines:
                                    order: function() { return feature.sort_key + 3; }
                                    outline:
                                        order: 353
                        tunnel:
                            filter: {is_tunnel: yes, $zoom: {min: 13} }
                            draw:
                                lines:
                                    color: *major_tunnel1
                                    outline:
                                        color: *major_tunnel_casing1
                    link:
                        filter: { is_link: yes } # on- and off-ramps, etc
                        draw:
                            lines:
                                color: [[14, [0.714,0.733,0.760]], [15, [0.578,0.608,0.650]], [16, [0.533,0.555,0.586]], [17, [1.00,1.00,1.00]]]
                                width: [[11, 0.0px], [12, 0.15px], [14, 0.15px], [15, 0.75px], [16, 1.25px], [17, 2px], [18, 2px], [19, 4px]]
                                outline:
                                    color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17,[0.578,0.608,0.650]]]
                                    width: [[11, 0px], [16, 0px], [17, 1px], [18, 1px]]
                    tertiary-in-green:
                        filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden,wood,national_park,protected_area,battlefield,forest] }
                        draw:
                            lines:
                                color: [[11, [0.408,0.430,0.461]], [13, [0.408,0.430,0.461]], [14,[0.408,0.430,0.461]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                                width: [[11, 0.4px], [12, 0.5px], [13, 0.6px], [14, .8px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                                outline:
                                    color: [[11, [0.894,0.906,0.914]], [14,[0.779,0.802,0.828]], [15, [0.529,0.556,0.592]], [16, [0.529,0.556,0.592]], [17,[0.578,0.608,0.650]], [18,[0.714,0.733,0.760]]]
                                    width: [[10,0.5px], [14,0.5px], [15,0.65px], [16,1.5px], [17, 2px], [18, 4px]]
                        green-routes:
                            filter: { ref: true, $zoom: { min: 12} }
                            draw:
                                lines:
                                    width: [[11, 0.5px], [12, 0.6px], [13, 0.7px], [14, .9px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                        labels-tertiary-in-green-z13:
                            filter: { $zoom: { min: 13 } }
                            draw:
                                text-blend-order:
                                    priority: 55
                                    visible: *text_visible_tertiary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        stroke: { color: [0.843,0.961,0.914], width: 4 }
                        labels-tertiary-in-green-z17:
                            filter: { $zoom: { min: 17 } }
                            draw:
                                text-blend-order:
                                    priority: 55
                                    visible: *text_visible_tertiary_e
                                    text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                    font:
                                        fill: [0.536,0.556,0.581]
                                        stroke: { color: [1.00,1.00,1.00], width: 4 }
                        # golf_course:
                        #     filter: { landuse_kind: golf_course }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                        # zoo:
                        #     filter: { landuse_kind: zoo }
                        #     draw:
                        #         lines:
                        #             outline:
                        #                 color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                    labels-tertiary-z13:
                        filter: { $zoom: [13] }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 9px
                                    stroke: { color: *text_stroke, width: 4 }
                    labels-tertiary-z14:
                        filter: { $zoom: [14] }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary_e
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 9px
                                    stroke: { color: *text_stroke, width: 4 }
                    labels-tertiary-z15:
                        filter: { $zoom: [15] }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 10px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-tertiary-z16:
                        filter: { $zoom: [16] }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 12px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-tertiary-z17:
                        filter: { $zoom: { min: 17, max: 18 } }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 13px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
                    labels-tertiary-z18:
                        filter: { $zoom: { min: 18 } }
                        draw:
                            text-blend-order:
                                priority: 55
                                visible: *text_visible_tertiary
                                text_source: function() { if( feature.ref && feature.name ) { if( feature.ref.length < 6 ) { return feature.ref + " " + feature.name; } else { return feature.name; } } else { return feature.name; } }
                                font:
                                    fill: [0.536,0.556,0.581]
                                    size: 13px
                                    stroke: { color: [0.969,0.973,0.973], width: 4 }
            minor_road:
                filter: { kind: minor_road, not: { highway: service, aeroway: [runway, taxiway] } }
                draw:
                    lines:
                        color: [[11, [0.885,0.885,0.885]], [12, [0.714,0.733,0.760]], [13, [0.779,0.802,0.828]], [14, [0.779,0.802,0.828]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                        width: [[11, 0.25px], [12, 0.35px], [13, 0.55px], [14, 1px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                        outline:
                            color: [[11, [0.894,0.906,0.914]], [14, [0.779,0.802,0.828]], [15, [0.714,0.733,0.760]], [16, [0.714,0.733,0.760]], [17, [0.744,0.764,0.792]]]
                            width: [[11, 0px], [14, 0px], [15, 0.75px], [16, 1.5px], [17, 2px], [18, 3px]]
                early:
                    filter: { $zoom: { max: 16 } }
                    draw:
                        lines:
                            order: 350
                            outline:
                                order: 351
                motor_vehicle_no:
                    filter: { highway: unclassified, motor_vehicle: no }
                    draw:
                        lines:
                            visible: false

                # Is this junk code?
                round:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        lines:
                            cap: round
                            join: round

                minor-in-green:
                    filter: { landuse_kind: [park,protected_area,nature_reserve,conservation,golf_course,garden,wood,farmland,farm,national_park,protected_area,battlefield] }
                    draw:
                        lines:
                            color: [[11, [0.885,0.885,0.885]], [12, [0.662,0.681,0.704]], [13, [0.662,0.681,0.704]], [14, [0.662,0.681,0.704]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            outline:
                                color: [[11, [0.894,0.906,0.914]], [14, [0.662,0.681,0.704]], [15, [0.662,0.681,0.704]], [16, [0.662,0.681,0.704]]]
                    labels-minor-in-green-z15:
                        filter: { $zoom: { min: 15 } }
                        draw:
                            text-blend-order:
                                priority: 56
                                visible: *text_visible_minor_road_e
                                text_source: name
                                font:
                                    fill: [0.536,0.556,0.581]
                                    stroke: { color: [0.843,0.961,0.914], width: 4 }
                    labels-minor-in-green-z17:
                        filter: { $zoom: { min: 17 } }
                        draw:
                            text-blend-order:
                                priority: 56
                                visible: *text_visible_minor_road_e
                                text_source: name
                                font:
                                    fill: [0.536,0.556,0.581]
                                    stroke: { color: [1.00,1.00,1.00], width: 4 }
                #     golf_course:
                #         filter: { landuse_kind: golf_course }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.30,0.30,0.30]], [18, [0.00,0.00,0.00]]]
                #     zoo:
                #         filter: { landuse_kind: zoo }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.30,0.30,0.30]], [18, [0.00,0.00,0.00]]]
                # in_university:
                #     filter: { landuse_kind: university }
                #     draw:
                #         lines:
                #             color: [[11, [0.885,0.885,0.885]], [13, [0.75,0.75,0.75]], [14, [0.70,0.70,0.70]], [15, [0.6,0.6,0.6]], [16, [0.3,0.3,0.3]], [17, [1.0,1.0,1.0]]]
                #             outline:
                #                 color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                #                 width: [[11, 1px], [16, 0px], [17, 1.5px]]
                # in_hospital:
                #     filter: { landuse_kind: hospital }
                #     draw:
                #         lines:
                #             color: [[11, [0.885,0.885,0.885]], [13, [0.75,0.75,0.75]], [14, [0.70,0.70,0.70]], [15, [0.6,0.6,0.6]], [16, [0.3,0.3,0.3]], [17, [1.0,1.0,1.0]]]
                #             outline:
                #                 color: [[11, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]], [17, [0.00,0.00,0.00]]]
                #                 width: [[11, 1px], [16, 0px], [17, 1.5px]]

                tunnel:
                    filter: {is_tunnel: yes, $zoom: {min: 13} }
                    draw:
                        lines:
                            color: *minor_tunnel1
                            outline:
                                color: *minor_tunnel_casing1
                minor_road_bridge:
                    filter: { is_bridge: yes }
                    draw:
                        lines:
                            cap: round
                            outline:
                                cap: butt
                labels-minor_road-z15:
                    filter: { $zoom: 15 }
                    draw:
                        text-blend-order:
                            priority: 56
                            visible: *text_visible_minor_road_e
                            text_source: name
                            font:
                                fill: [0.536,0.556,0.581]
                                size: 9px
                                stroke: { color: *text_stroke, width: 4 }
                labels-minor_road-z16:
                    filter: { $zoom: 16 }
                    draw:
                        text-blend-order:
                            priority: 56
                            visible: *text_visible_minor_road_e
                            text_source: name
                            font:
                                fill: [0.536,0.556,0.581]
                                size: 12px
                                stroke: { color: *text_stroke, width: 4 }
                labels-minor_road-z17:
                    filter: { $zoom: { min: 17, max: 18 } }
                    draw:
                        text-blend-order:
                            priority: 56
                            visible: *text_visible_minor_road_e
                            text_source: name
                            font:
                                fill: [0.40,0.40,0.40]
                                size: 12px
                                stroke: { color: [0.969,0.973,0.973], width: 4 }
                labels-minor_road-z18:
                    filter: { $zoom: { min: 18 } }
                    draw:
                        text-blend-order:
                            priority: 56
                            visible: *text_visible_minor_road
                            text_source: name
                            font:
                                fill: [0.40,0.40,0.40]
                                size: 13px
                                stroke: { color: [0.969,0.973,0.973], width: 4 }
            service_road:
                filter: { kind: minor_road, highway: service }
                draw:
                    lines:
                        color: [[14, [0.714,0.733,0.760]], [15, [0.714,0.733,0.760]], [16, [1.0,1.0,1.0]], [17, [1.0,1.0,1.0]]]
                        width: [[14, 0.25px], [15, 0.5px], [16, 0px], [17, 2px], [18, 6px], [19, 6px]]
                        outline:
                            color: [[14,[0.894,0.906,0.914]], [15,[0.714,0.733,0.760]], [16,[0.714,0.733,0.760]], [17, [0.791,0.812,0.842]]]
                            width: [[13, 0px], [15, 0px], [16, 0.5px], [17, 2px], [18, 2px]]
                service-in-green:
                    filter: { landuse_kind: [park,protected_area,nature_reserve,conservation,golf_course,garden,wood,farmland,farm,national_park,battlefield] }
                    draw:
                        lines:
                            color: [[14, [0.779,0.802,0.828]], [15, [0.779,0.802,0.828]], [16, [1.0,1.0,1.0]], [17, [1.0,1.0,1.0]]]
                            outline:
                                color: [[14,[0.894,0.906,0.914]], [15,[0.714,0.733,0.760]], [17,[0.714,0.733,0.760]]]
                    labels-service-in-green:
                        draw:
                            text-blend-order:
                                priority: 57
                                visible: *text_visible_service_road
                                text_source: name
                                font:
                                    fill: [0.536,0.556,0.581]
                                    stroke: { color: [0.843,0.961,0.914], width: 4 }
                #     golf_course:
                #         filter: { landuse_kind: golf_course }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                     width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                #     nature_reserve:
                #         filter: { landuse_kind: nature_reserve }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                     width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                #     conservation:
                #         filter: { landuse_kind: conservation }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                     width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                #     zoo:
                #         filter: { landuse_kind: zoo }
                #         draw:
                #             lines:
                #                 outline:
                #                     color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                     width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                in_cemetery_garden:
                    filter: { landuse_kind: [cemetery,garden] }
                    draw:
                        lines:
                            color: [[14, [0.779,0.802,0.828]], [15, [0.779,0.802,0.828]], [16, [1.0,1.0,1.0]], [17, [1.0,1.0,1.0]]]
                            width: [[14, 0.4px], [15, 0.5px], [16, 0px], [17, 2px], [18, 6px], [19, 6px]]
                            outline:
                                color: [[14,[0.894,0.906,0.914]], [15,[0.714,0.733,0.760]], [17,[0.714,0.733,0.760]]]
                # in_university:
                #     filter: { landuse_kind: university }
                #     draw:
                #         lines:
                #             outline:
                #                 color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                 width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                # in_hospital:
                #     filter: { landuse_kind: hospital }
                #     draw:
                #         lines:
                #             outline:
                #                 color: [[14,[1.0,1.0,1.0]], [16,[1.0,1.0,1.0]], [17,[0.30,0.30,0.30]], [18,[0.00,0.00,0.00]]]
                #                 width: [[13, 0px], [14, 0.5px], [16, 0px], [17, 1.0px]]
                labels-service_road:
                    filter: { $zoom: 17 }
                    draw:
                        text-blend-order:
                            priority: 57
                            visible: *text_visible_service_road
                            text_source: name
                            font:
                                # need fill color?
                                fill: [0.536,0.556,0.581]
                                size: 12px
                                stroke: { color: [0.969,0.973,0.973], width: 4 }
                labels-service_road-z18:
                    filter: { $zoom: { min: 18 } }
                    draw:
                        text-blend-order:
                            priority: 57
                            visible: *text_visible_service_road
                            text_source: name
                            font:
                                fill: [0.536,0.556,0.581]
                                size: 13px
                                stroke: { color: [0.969,0.973,0.973], width: 4 }
            path:
                filter:
                    all:
                        - kind: [path, portage_way, footway, steps, track, cycleway]
                draw:
                    lines:
                        color: black
                        width: [[11, 0.5px], [12, 0.65px], [13, 0.65px], [14, 1px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                        outline:
                            color: black
                            width: [[11, 0px], [14, 0px], [15, 0.75px], [16, 1.5px], [17, 2px], [18, 3px]]
                early:
                    filter:
                        $zoom: { max: 17 }
                    draw:
                        lines:
                            order: 351
                            outline:
                                order: 350
                portage_way:
                    filter: { kind: portage_way }
                    draw:
                        lines:
                            color: [0.350,0.350,0.350]
                pedestrian:
                    filter: { highway: pedestrian }
                    draw:
                        lines:
                            color: [[16,[0.749,0.749,0.749]]]
                            width: [[14, 0.35px], [15, 0.35px], [16, 1px], [17, 2px], [18, 3px], [19, 4px]]
                            # outline:
                            #     color: [0.790,0.790,0.790]
                            #     width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                bridge:
                    filter: { is_bridge: yes }
                    draw:
                        lines:
                            width: [[14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                            cap: round
                            outline:
                                color: [[15,*path_bridge_casing2],[16,*path_bridge_casing1]]
                                width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                                cap: butt
                in_park:
                    filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden] }
                    draw:
                        dashedline:
                            color: [0.350,0.350,0.350]
                            # outline:
                            #     color: [0.790,0.790,0.790]
                            #     width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                #     golf_course:
                #         filter: { landuse_kind: golf_course }
                #         draw:
                #             lines:
                #                 color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #                 outline:
                #                     color: [0.790,0.790,0.790]
                #                     width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                #     nature_reserve:
                #         filter: { landuse_kind: nature_reserve }
                #         draw:
                #             lines:
                #                 color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #                 outline:
                #                     color: [0.790,0.790,0.790]
                #                     width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                #     conservation:
                #         filter: { landuse_kind: conservation }
                #         draw:
                #             lines:
                #                 color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #                 outline:
                #                     color: [0.790,0.790,0.790]
                #                     width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                # in_cemetery_garden:
                #     filter: { landuse_kind: [cemetery,garden] }
                #     draw:
                #         lines:
                #             color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #             width: [[14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                #             outline:
                #                 color: [0.790,0.790,0.790]
                #                 width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                # in_zoo:
                #     filter: { landuse_kind: zoo }
                #     draw:
                #         lines:
                #             color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #             width: [[14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                #             outline:
                #                 color: [0.790,0.790,0.790]
                #                 width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                # in_university:
                #     filter: { landuse_kind: university }
                #     draw:
                #         lines:
                #             color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #             width: [[14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                #             outline:
                #                 color: [0.790,0.790,0.790]
                #                 width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                # in_hospital:
                #     filter: { landuse_kind: hospital }
                #     draw:
                #         lines:
                #             color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                #             width: [[14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                #             outline:
                #                 color: [0.790,0.790,0.790]
                #                 width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                labels-path:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        text-blend-order:
                            priority: 58
                            visible: *text_visible_path
                            text_source: name
                            font:
                                fill: [0.536,0.556,0.581]
                                size: 12px
                                stroke: { color: *text_stroke, width: 4 }
            track:
                filter: { kind: path, highway: track }
                draw:
                    lines:
                        color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                        width: [[13, 0px], [14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                        cap: butt
                        join: round
                        outline:
                            color: [0.790,0.790,0.790]
                            width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                bridge:
                    filter: { is_bridge: yes }
                    draw:
                        lines:
                            cap: butt
                            width: [[13, 0px], [14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                            cap: round
                            outline:
                                color: [1.0,1.0,1.0]
                                width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
                                cap: butt
                in_park:
                    filter: { landuse_kind: [park,national_park,nature_reserve,conservation,golf_course,garden,battlefield] }
                    draw:
                        lines:
                            color: [[14, [0.790,0.790,0.790]], [15, [1.00,1.00,1.00]]]
                            width: [[13, 0px], [14, 0.35px], [15, 0px], [16, 0.25px], [17, 3px], [18, 3px], [19, 4px]]
                            outline:
                                color: [0.790,0.790,0.790]
                                width: [[14, 0.0px], [15, 0.35px], [16, 0.45px], [17, 0.85px], [18, 1px]]
            steps:
                filter:
                    all:
                        - kind: path
                        - highway: steps
                draw:
                    dashed:
                        #order: function() { return feature.sort_key; }
                        order: 1005
                        color: [0.501,0.650,0.650]
                        width: [[15, 0.6], [16, 1px], [17, 1px], [18, 4px], [19, 1.5m]]
                        interactive: true
                    lines:
                        visible: false
                        order: 1000
                        interactive: true
                        #width: [[13, 0.75px], [14, 0.85px], [15, 1.1px], [16, 2px], [17, 6px], [18, 7px], [19, 10px]]
                        #color: [[15,[0.120,0.600,0.520]],[16,[0.623,0.820,0.797]]]
                        color: [[14,[0.510,0.752,0.695]],[15,[0.671,0.839,0.820]],[16,[0.671,0.839,0.820]]]
                        width: [[13, 0.75px], [14, 0.6px], [15, 1px], [16, 2px], [17, 3px], [18, 4px], [19, 4px]]
                        visible: true
                        #color: purple
                steps-late:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        # lines:
                        #     color: [0.707,0.884,0.872]
                        #     visible: true
                        #     outline:
                        #         width: [[17, 0px], [18, 1px], [19, 2px]]
                        #         color: [0.850,0.850,0.850]
                        dashed:
                            width: [[17, 2px], [18, 3px], [19, 3.5px]]
                            color: [0.501,0.650,0.650]
                early-show-as-lines-z14:
                    filter: { $zoom: { max: 16 } }
                    draw:
                        dashed:
                            visible: false
                        lines:
                            visible: true
                networked:
                    filter: { walking_network: true }
                    draw:
                        lines:
                            width: [[13, 0.75px], [14, 1px], [15, 2px], [16, 2px], [17, 3px], [18, 4px], [19, 4px]]
                        dashed:
                            width: [[13, 1.25px],[14, 2px],[15, 1.75px],[16, 2px], [17, 4px], [18, 5px], [19, 8px]]
                        highlight:
                            order: 980
                            color: [[12,[0.900,1.000,0.850]],[14,[0.930,1.000,0.850]],[15,[1.000,1.000,0.870]]]
                            width: [[12, 3px], [13, 4px], [14, 5px], [15, 6px], [16, 8px], [17, 10px], [18, 14px], [19, 16px]]
                            join: round
                    early:
                        filter: { $zoom: { max: 15 } }
                        draw:
                            lines:
                                color: [0.120,0.600,0.520]
                    networked-steps-late:
                        filter: { $zoom: { min: 18 } }
                        draw:
                            dashed:
                                color: [0.120,0.600,0.520]
                in_park:
                    filter: { landuse_kind: [park,nature_reserve,conservation,golf_course,garden] }
                    draw:
                        dashed:
                            color: [0.120,0.600,0.520]
                # in_university:
                #     filter: { landuse_kind: university }
                #     draw:
                #         dashed:
                #             color: *path_steps1_b
                #             outline:
                #                 color: [1.0,1.0,1.0]
                # in_hospital:
                #     filter: { landuse_kind: hospital }
                #     draw:
                #         dashed:
                #             color: *path_steps1_b
                #             outline:
                #                 color: [1.0,1.0,1.0]
                labels-steps:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        text-blend-order:
                            priority: 59
                            visible: *text_visible_steps
                            text_source: name
                            font:
                                fill: [0.45,0.45,0.45]
                                size: 11px
                                stroke: { color: *text_stroke, width: 4 }
            winter_sport_pistes:
                filter: { kind: piste }
                draw:
                    lines:
                        order: 388   # We override the server value here because Eraser Map is also a special Ski Map
                        cap: round
                        join: round
                        color: '#909090'
                        width: [[13,0px],[14,1px],[15, 1.25px], [16, 2px], [18, 3m]]
                    text-blend-order:
                        priority: 18
                        visible: *text_visible_piste
                        font:
                            fill: *text_fill_piste
                            size: 12px
                            stroke: { color: [0.913,0.925,0.933], width: 4 }
                early:
                    filter: { $zoom: { max: 15 } }
                    draw:
                        text-blend-order:
                            visible: false
                early-z15:
                    filter: { $zoom: [15] }
                    draw:
                        text-blend-order:
                            font:
                                fill: *text_fill_piste_e
                                size: 11px
                easy:
                    filter: { piste_difficulty: easy }
                    draw:
                        lines:
                            color: [0.367,0.750,0.622]
                intermediate:
                    filter: { piste_difficulty: intermediate }
                    draw:
                        lines:
                            color: [0.420,0.678,0.863]
                advanced:
                    filter: { piste_difficulty: advanced }
                    draw:
                        lines:
                            color: [0.450,0.450,0.450]
                        text-blend-order:
                            text_source: function() { if( feature.name ){ return ' ' + feature.name; } else { return ''; } }
                expert:
                    filter: { piste_difficulty: expert }
                    draw:
                        lines:
                            color: [0.450,0.450,0.450]
                        text-blend-order:
                            text_source: function() { if( feature.name ){ return ' ' + feature.name; } else { return ''; } }
            pier:
                filter: { kind: path, man_made: pier }
                draw:
                    lines:
                        color: [0.993,0.993,0.993]
                        width: [[13, 0px], [14, 0.5px],[15, 1.5px], [16, 2.5px],[17, 3px],[18, 3m]]
                        outline:
                            color: [0.431,0.806,0.914]
                            width: [[15, 0px],[16,0.65px], [17, 0.75px], [18, 1px], [19, 1.5px]]
            racetrack:
                filter: { kind: racetrack }
                draw:
                    lines:
                        interactive: true
                        cap: round
                        join: round
                        color: [0.400,0.666,0.690]
                        width: [[13,0.5px],[14,1px],[15, 1px], [16, 1.5px], [18, 3px], [19, 5px]]
            airport-lines:
                filter: { kind: minor_road, aeroway: [runway,taxiway] }
                draw:
                    lines:
                        color: [[11, [0.25,0.25,0.25]], [17, [0.0,0.0,0.0]]]
                        cap: butt
                        width: [[10, 1px], [11, 1.5px], [12, 2px], [13, 4px], [14, 8px], [15, 16px], [16, 32px], [17, 60m]]
                        outline:
                            color: [1.0,1.0,1.0]
                # Features come in at zoom 9, but include mostly minor airports without POIs until z13
                early:
                    filter: { $zoom: { max: 12 }, not: { landuse_kind: [aerodrome, runway, taxiway] } }
                    draw:
                        lines:
                            visible: false
                not-round:
                    filter: { $zoom: { min: 17 } }
                    draw:
                        lines:
                            cap: butt
                taxiway:
                    filter: { aeroway: taxiway }
                    draw:
                        lines:
                            color: [[11, [0.885,0.885,0.885]], [13, [0.779,0.802,0.828]], [14,[0.779,0.802,0.828]], [15, [1.0,1.0,1.0]], [16, [1.0,1.0,1.0]]]
                            width: [[11, 0.5px], [12, 0.65px], [13, 0.65px], [14, 1px], [15, 0px], [16, 1px], [17, 6px], [18, 9m]]
                            outline:
                                color: [[11, [0.894,0.906,0.914]], [14,[0.779,0.802,0.828]], [15, [0.714,0.733,0.760]], [16, [0.714,0.733,0.760]], [17, [0.744,0.764,0.792]]]
                                width: [[11, 0px], [14, 0px], [15, 0.75px], [16, 1.5px], [17, 2px], [18, 3px]]
                    early:
                        filter: { $zoom: { max: 13 } }
                        draw:
                            lines:
                                visible: false
            ferry:
                filter: { kind: ferry }
                draw:
                    lines:
                        color: [0.451,0.804,0.878]
                        width: [[12, 0.5px], [13, 0.75px], [15, 1.0px]]
            aerialway:
                filter: { kind: aerialway }
                draw:
                    lines:
                        interactive: true
                        color: [0.5,0.5,0.5]
                        width: [[14, 0.5px], [15, 1.0px], [16, 2m]]
                gondola_cable_car:
                    filter: { aerialway: [gondola, cable_car] }
                    draw:
                        lines:
                            color: [0.45,0.45,0.45]
                            width: [[12, 0.5px], [13, 0.5px], [14, 1.75px], [15, 2.5px], [16, 2.5px], [18, 3m]]

                chair_lift:
                    filter: { aerialway: chair_lift }
                    draw:
                        lines:
                            color: [0.45,0.45,0.45]
                            width: [[12, 0.5px], [13, 0.5px], [14, 1.75px], [15, 2.5px], [16, 2.5px], [18, 3m]]
    
                aerialway-labels:
                    filter: { $zoom: { min: 14 } }
                    draw:
                        text-blend-order:
                            priority: 59
                            visible: *text_visible_aerialway
                            text_source: name
                            font:
                                fill: *text_fill
                                size: 10px
                                stroke: { color: *text_stroke_park, width: 4 }
                    minor:
                        filter: { not: { aerialway: [gondola,cable_car,chair_lift] }, $zoom: { max: 17 } }
                        draw:
                            text-blend-order:
                                visible: false
                    early_gondola:
                        filter: { $zoom: [14], aerialway: [gondola,cable_car] }
                        draw:
                            text-blend-order:
                                font:
                                    weight: 600
                    later:
                        filter: { $zoom: { min: 15 } }
                        draw:
                            text-blend-order:
                                font:
                                    weight: 600


    water:
        data: { source: osm, layer: water }
        draw:
            polygons:
                #interactive: true
                order: function() { return feature.sort_key; }
                #color: [0.608,0.925,0.965]
        later:
            filter: { $zoom: { min: 12 } }
            draw:
                polygons:
                    order: function() { return feature.sort_key + 1; }
                    #color: [0.608,0.925,0.965]

        lakes:
            filter:
                all:
                    - kind: [ocean, lake, water, riverbank, reservoir, swimming_pool]
                # WARNING: any area filters here must match the area filters in the water_boundaries-not-ocean layer
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 1 },  area: { min: 40000000000 } }
                    - { $zoom: { min: 2 },  area: { min: 20000000000 } }
                    # some weird natural earth scale set transition
                    - { $zoom: { min: 3 },  area: { min: 80000000000 } }
                    - { $zoom: { min: 4 },  area: { min: 5000000000 } }
                    - { $zoom: { min: 5 },  area: { min: 700000000 } }
                    - { $zoom: { min: 6 },  area: { min: 500000000 } }
                    - { $zoom: { min: 7 },  area: { min: 160000000 } }
                    - { $zoom: { min: 8 },  area: { min: 40000000 } }
                    - { $zoom: { min: 9 },  area: { min: 10000000 } }
                    - { $zoom: { min: 10 }, area: { min: 8000000 } }
                    - { $zoom: { min: 11 }, area: { min: 2000000 } }
                    - { $zoom: { min: 12 }, area: { min: 200000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 2000 } }
                    - { $zoom: { min: 15 } }
            draw:
                polygons:
                    # color: [0.608,0.925,0.965] ## original color
                    # color: [0.528,0.902,0.960] ## more saturated
                    color: [0.432,0.890,0.960] ## even more saturated
        playas:
            filter: { kind: playa, $zoom: {min: 6} }
            draw:
                dashedline:
                    order: function() { return feature.sort_key; }
                    color: grey
                    width: 1px
                polygons_transparent:
                    color: [0.85,0.85,0.85, 0.5]
        other-water-areas:
            filter: { not: { kind: [ocean, lake, water, reservoir, playa] }, $zoom: { min: 11 }, area: { min: 100 } }
            draw:
                polygons:
                    color: [0.432,0.890,0.960]
        swimming_pool:
            filter: { kind: swimming_pool }
            draw:
                polygons:
                    color: [0.432,0.890,0.960]
        water-boundary-ocean-early:
            filter: { boundary: yes, kind: ocean, $zoom: {min: 1, max: 17} }
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    color: [0.431,0.806,0.914]
                    width: 1px
                    join: round
        water-boundary-ocean-late:
            filter: { boundary: yes, kind: ocean, $zoom: {min: 17} }
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    color: [0.431,0.806,0.914]
                    width: 1px
                    join: round
        water_boundaries-not-ocean:
            # filter: { boundary: yes, not: { kind: [ocean,playa] }, $zoom: { min: 8 } }
            filter:
                all:
                    - boundary: yes
                    - not: { kind: [ocean,playa] }
                    - $zoom: { min: 8}
                # WARNING: any area filters here must match the area filters in the lakes layer
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 1 },  area: { min: 40000000000 } }
                    - { $zoom: { min: 2 },  area: { min: 20000000000 } }
                    # some weird natural earth scale set transition
                    - { $zoom: { min: 3 },  area: { min: 80000000000 } }
                    - { $zoom: { min: 4 },  area: { min: 5000000000 } }
                    - { $zoom: { min: 5 },  area: { min: 700000000 } }
                    - { $zoom: { min: 6 },  area: { min: 500000000 } }
                    - { $zoom: { min: 7 },  area: { min: 160000000 } }
                    - { $zoom: { min: 8 },  area: { min: 40000000 } }
                    - { $zoom: { min: 9 },  area: { min: 10000000 } }
                    - { $zoom: { min: 10 }, area: { min: 8000000 } }
                    - { $zoom: { min: 11 }, area: { min: 2000000 } }
                    - { $zoom: { min: 12 }, area: { min: 200000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 2000 } }
                    - { $zoom: { min: 15 } }
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    # color: [0.625,0.806,0.822]
                    color: [0.431,0.806,0.914]
                    width: 1px
                    join: round
            early:
                filter: { $zoom: { min: 14 } }
                draw:
                    lines:
                        order: 241
            swimming-pools-early:
                filter: { kind: swimming_pool, $zoom: { max: 19 } }
                draw:
                    lines:
                        visible: false
            riverbank:
                # river boundaries like the thames in london, la seine in paris
                filter: { kind: riverbank }
                draw:
                    lines:
                        color: [0.431,0.806,0.914]
                        width: 1px
        river:
            #river center lines, not boundaries for polygons
            filter: { kind: [river,canal,stream,dam,ditch,drain], $zoom: { min: 11 }, not: { is_tunnel: true } }
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    interactive: true
                    color: [[10,[0.472,0.834,0.890]],[14,[0.511,0.877,0.930]]]
                    # color: [0.592,0.929,0.961]
                    #color: [[11,[0.753,0.820,0.835]],[12,[0.710,0.800,0.824]],[13,[0.886,0.937,0.988]]]
                    #width: [[14,2.5px],[15,4.0px],[17,8.0px],[18,10.0px]]
                    width: [[10,0px],[11,0.75px],[12,1.0px],[13,1.25px],[14,2.25px],[15,3px],[16,4px],[17,5m]]
                    cap: round
                    outline:
                        #color: [[11,[0.671,0.788,0.812]],[13,[0.710,0.800,0.824]],[14,[0.635,0.812,0.843]]]
                        width: [[9,0px],[11,0px],[12,0px],[13,0.5px],[14,0.75px],[15,0.75px],[16,0.75px],[17,1px]]
            not-river-early:
                filter: { $zoom: [11,12], not: { kind: river } }
                draw:
                    lines:
                        width: [[11,0px], [12,0.6px]]
            intermittent:
                filter:
                    any:
                        - intermittent: yes
                        - kind: drain
                draw:
                    lines:
                        visible: false
                    dots-lines:
                        interactive: true
                        order: function() { return feature.sort_key; }
                        color: [[10,[0.472,0.834,0.890]],[14,[0.511,0.877,0.930]]]
                        width: [[10,0px],[11,0.5px],[12,1px],[13,2px],[14,3px],[15,4px],[16,5px]]

    water-line-labels:
        data: { source: mapzen, layer: [water] }
        filter:
            all:
                - name: true
                - $geometry: line
                - kind: [river,canal,stream,dam,ditch,drain]
                - $zoom: { min: 11 }
        draw:
            text-blend-order:
                font:
                    fill: *text_fill_water
                    family: *text_font_family
                    style: italic
                    weight: 400
                    size: [[12,11px],[13,12px]]
        water-line-labels-z17:
            filter: { $zoom: [17] }
            draw:
                text-blend-order: { font: { size: 14px } }
        not-river-not-stream:
            filter: { kind: [canal,dam,ditch,drain], $zoom: { max: 14 } }
            draw:
                text-blend-order:
                    visible: false
        stream:
            filter: { kind: [stream], $zoom: { max: 14 } }
            draw:
                text-blend-order:
                    visible: false

    

   